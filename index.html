<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Analyse de contraste de texte sur fond imagée">
    <meta name="keywords" content="Ratio, contraste, analysis">
    <meta name="author" content="freddi">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>couleur & image</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="toggle-theme">
        <label
        for="themeToggle"
        class="themeToggle st-sunMoonThemeToggleBtn"
        type="checkbox"
      >
        <input type="checkbox" id="themeToggle" class="themeToggleInput" checked>
        <svg
          width="18"
          height="18"
          viewBox="0 0 20 20"
          fill="currentColor"
          stroke="none"
        >
          <mask id="moon-mask">
            <rect x="0" y="0" width="20" height="20" fill="white"></rect>
            <circle cx="11" cy="3" r="8" fill="black"></circle>
          </mask>
          <circle
            class="sunMoon"
            cx="10"
            cy="10"
            r="8"
            mask="url(#moon-mask)"
          ></circle>
          <g>
            <circle class="sunRay sunRay1" cx="18" cy="10" r="1.5"></circle>
            <circle class="sunRay sunRay2" cx="14" cy="16.928" r="1.5"></circle>
            <circle class="sunRay sunRay3" cx="6" cy="16.928" r="1.5"></circle>
            <circle class="sunRay sunRay4" cx="2" cy="10" r="1.5"></circle>
            <circle class="sunRay sunRay5" cx="6" cy="3.1718" r="1.5"></circle>
            <circle class="sunRay sunRay6" cx="14" cy="3.1718" r="1.5"></circle>
          </g>
        </svg>
      </label>
    </div>
    <section>
    <div class="container">
        <div class="input-navigation">
            <div class="color">
                <input type="text" id="textColorInput" value="#000000" aria-label="ColorInput"><span><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 32.5-156t88-127Q256-817 330-848.5T488-880q80 0 151 27.5t124.5 76q53.5 48.5 85 115T880-518q0 115-70 176.5T640-280h-74q-9 0-12.5 5t-3.5 11q0 12 15 34.5t15 51.5q0 50-27.5 74T480-80Zm0-400Zm-220 40q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120-160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm200 0q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120 160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17ZM480-160q9 0 14.5-5t5.5-13q0-14-15-33t-15-57q0-42 29-67t71-25h70q66 0 113-38.5T800-518q0-121-92.5-201.5T488-800q-136 0-232 93t-96 227q0 133 93.5 226.5T480-160Z"/></svg></span>
                <input type="color" id="textColorPicker" value="#000000" aria-label="ColorPicker" tabindex="0">
                <div class="color-afficheur"></div>
            </div>

   
            <div class="image">
                <div class="file">
                <input type="file" id="imageLoader" accept="image/*" tabindex="-1" aria-label="UploadImage">
     
                    <span><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M440-320v-326L336-542l-56-58 200-200 200 200-56 58-104-104v326h-80ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"/></svg></span>    
                <label for="imageLoader" tabindex="0">Télécharger une image</label>
      
            </div>
            </div>

            <div class="navigation">
                
                <button id="analyzeButton" aria-label="ContrastAnalyser" tabindex="0">Analyser
                    <div class="spinner"></div>
                </button>
                <button id="settingsToggle" aria-label="settingsToggle" tabindex="0" onclick="settingsToggle()"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M440-120v-240h80v80h320v80H520v80h-80Zm-320-80v-80h240v80H120Zm160-160v-80H120v-80h160v-80h80v240h-80Zm160-80v-80h400v80H440Zm160-160v-240h80v80h160v80H680v80h-80Zm-480-80v-80h400v80H120Z"/></svg></button>
            </div>

            <div id="settings">
                <div class="settings-precision">
                    <div class="settings-precision-input">
                    <label for="quality"  name="precision" aria-label="precisionAnalyse" >Précision de l'analyse</label>
                    <input type="range" min="1" max="10" value="5" name="precision" id="precision">
                    <datalist id="values">
                        <option value="1" label="1"></option>
                        <option value="10" label="10"></option>
                    </div>
                    <div class="settings-precision-info">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>
                        <p>Une petite valeur segmente d'avantage l'image permettant ainsi une analyse plus précise</p>
                    </div>
                </div>
                <div class="settings-color">
                    <p>Affichage des couleurs</p>
     
                    <input type="radio" id="solidFill" value="1" name="color" aria-label="selectAffichageSolid">
                    <label for="solidFill">Couleur pleine</label>
                    <input type="radio" id="gradientFill" value="2" checked="checked" name="color" aria-label="selectAffichageGradient">
                    <label for="gradientFill">Dégradé de couleur</label>
              
                </div>
            </div>
        </div>    
                
        <canvas id="imageCanvas"></canvas>
    </section>

    </div>

    <div class="texte-description">
        <div class="texte-container">
            <h3>Vert</h3>
            <p class="vert">Indique que le texte de taille normale avec la couleur de texte sélectionnée <a href="https://webaim.org/resources/contrastchecker/">respecte les standards WCAG AAA en matière de contraste de couleur</a>. Cela signifie que le contraste est supérieur ou égal à 7:1, ce qui assure une très bonne lisibilité et accessibilité.</p>  
        </div>    
        
        <div class="texte-container">
            <h3>Jaune</h3>
            <p class="jaune">Indique que le contraste respecte les standards WCAG AA. Toutefois, pour les textes en gras de grande taille, ces zones respectent également les standards WCAG AAA car le contraste est supérieur ou égal à 4.5:1.</p>
        </div>
    
        <div class="texte-container">
            <h3>Rouge</h3>
            <p class="rouge">Indique que le contraste n'atteint pas les standards WCAG (ni AA ni AAA). Ces zones ne sont donc pas considérées comme accessibles.</p>
        </div>    
    </div>

<div class="texte">
    <h2>Analyse de contraste des couleurs sur fond imagé</h2>
    <ol>
        <li> <span> Choisir la couleur du texte</span>Utilisez le sélecteur de couleur pour définir la couleur de texte que vous souhaitez analyser.</li>
        <li> <span>Sélectionner l'image de fond</span>Chargez une image en utilisant le bouton "Choisir un fichier" pour évaluer le contraste avec le texte.</li>
        <li> <span> Appuyez sur le bouton "Analyser"</span>Cliquez sur le bouton "Analyser" pour démarrer l'analyse du contraste entre la couleur de texte sélectionnée et les zones de l'image.</li>
        <li> <span>Identifier les zones à fort contraste</span> Les zones de l'image seront marquées en fonction du niveau de contraste avec la couleur de texte choisie </li>
    </ol>
</div>

<div class="etape">
    <div class="explication">
        <div class="explication-texte">
            <p>Aa</p>
            <p class="explication-texte-color">Couleur du texte</p>
        </div>
    </div>
    
    <div class="explication">
        <div class="explication-image-exemple">
            <p class="explication-image-color">Couleur du pixel</p>
        </div>
    </div>
    </div>
    <div class="explication-math">
        <div class="explication-math-content">
        <div class="explication-math-1">
        <h2>Formule de Luminance</h2>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
          <mrow>
            <mi>L</mi>
            <mo>=</mo>
            <mn>0.2126</mn>
            <mo>&#x00D7;</mo>
            <msub>
              <mi>R</mi>
              <mrow></mrow>
            </msub>
            <mo>+</mo>
            <mn>0.7152</mn>
            <mo>&#x00D7;</mo>
            <msub>
              <mi>G</mi>
              <mrow></mrow>
            </msub>
            <mo>+</mo>
            <mn>0.0722</mn>
            <mo>&#x00D7;</mo>
            <msub>
              <mi>B</mi>
              <mrow></mrow>
            </msub>
          </mrow>
        </math>
        <p>Légende</p>
        <ul>
            <li>L = Valeur de Luminance</li>
            <li>R = Valeur de rouge</li>
            <li>G = Valeur de vert</li>
            <li>B = Valeur de bleu</li>
        </ul>
        </div>
        <div class="explication-math-1">
        <h2>Formule du Ratio de Contraste</h2>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
          <mfrac>
            <mrow>
              <msub>
                <mi>L</mi>
                <mn>1</mn>
              </msub>
              <mo>+</mo>
              <mn>0.05</mn>
            </mrow>
            <mrow>
              <msub>
                <mi>L</mi>
                <mn>2</mn>
              </msub>
              <mo>+</mo>
              <mn>0.05</mn>
            </mrow>
          </mfrac>
        </math>
        <p>Légende</p>
        <ul>
            <li>L1 = Valeur de Luminance de la 1er couleur</li>
            <li>L2 = Valeur de Luminance de la 2e couleur</li>
        </ul>
    </div>
    </div>
</div>

    <script src="script.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script>
document.addEventListener('DOMContentLoaded', function () {
    const toggle = document.getElementById('themeToggle');
    const root = document.documentElement;

    const lightModeVars = {
        '--clr-white': 'rgb(255, 255, 255)',
        '--clr-ultralight-gray': 'rgb(237, 237, 237)',
        '--clr-gray': 'rgb(233, 233, 233)',
        '--clr-subtle-gray': 'rgb(206, 206, 206)',
        '--clr-dark-gray': 'rgb(176, 176, 176)',
        '--clr-darker-gray': 'rgb(71, 71, 71)',
        '--clr-black': 'rgb(0, 0, 0)'
    };

    const darkModeVars = {
        '--clr-white': 'rgb(18, 18, 18)',
        '--clr-ultralight-gray': 'rgb(53, 53, 53)',
        '--clr-gray': 'rgb(49, 49, 49)',
        '--clr-subtle-gray': 'rgb(130, 130, 130)',
        '--clr-dark-gray': 'rgb(150, 150, 150)',
        '--clr-darker-gray': 'rgb(170, 170, 170)',
        '--clr-black': 'rgb(255, 255, 255)'
    };

    // Charger la préférence initiale si elle existe
    if (localStorage.getItem('dark-mode') === 'true') {
        toggle.checked = true;
        Object.keys(lightModeVars).forEach(key => {
            root.style.setProperty(key, lightModeVars[key]);
        });
    } else {
        Object.keys(darkModeVars).forEach(key => {
            root.style.setProperty(key, darkModeVars[key]);
        });
    }

    // Ajouter un gestionnaire d'événements à la case à cocher
    toggle.addEventListener('change', function () {
        if (toggle.checked) {
            Object.keys(lightModeVars).forEach(key => {
                root.style.setProperty(key, lightModeVars[key]);
            });
            localStorage.setItem('dark-mode', 'true');
        } else {
            Object.keys(darkModeVars).forEach(key => {
                root.style.setProperty(key, darkModeVars[key]);
            });
            localStorage.setItem('dark-mode', 'false');
        }
    });
});

  </script>
</body>
</html>